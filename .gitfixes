read.py:2: import time
read.py:3: from icm20948 import ICM20948
read.py:4: 
read.py:5:-s = ICM20948()
read.py:5:+imu = ICM20948()
read.py:6: 
read.py:7: print("ax,ay,az,gx,gy,gz,mx,my,mz")
read.py:8: 
read.py:9:-while True:
read.py:9:-    x, y, z = s.read_magnetometer_data()
read.py:9:-    ax, ay, az, gx, gy, gz = s.read_accelerometer_gyro_data()
read.py:9:+def read_all(imu):
read.py:10:+    line = imu.read_accelerometer_gyro_data()
read.py:11:+    line += imu.read_magnetometer_data()
read.py:12:+    return line
read.py:13: 
read.py:14:-#    print("""
read.py:14:-#Accel: {:05.2f} {:05.2f} {:05.2f}
read.py:14:-#Gyro:  {:05.2f} {:05.2f} {:05.2f}
read.py:14:-#Mag:   {:05.2f} {:05.2f} {:05.2f}""".format(
read.py:14:-#        ax, ay, az, gx, gy, gz, x, y, z
read.py:14:-#    ))
read.py:14:+if __name__ == "__main__":
read.py:15:+    while True:
read.py:16:+        x, y, z = imu.read_magnetometer_data()
read.py:17:+        ax, ay, az, gx, gy, gz = imu.read_accelerometer_gyro_data()
read.py:18: 
read.py:19:-    data = [ax,ay,az,gx,gy,gz,x,y,z]
read.py:19:+    #    print("""
read.py:20:+    #Accel: {:05.2f} {:05.2f} {:05.2f}
read.py:21:+    #Gyro:  {:05.2f} {:05.2f} {:05.2f}
read.py:22:+    #Mag:   {:05.2f} {:05.2f} {:05.2f}""".format(
read.py:23:+    #        ax, ay, az, gx, gy, gz, x, y, z
read.py:24:+    #    ))
read.py:25: 
read.py:26:-    line = ""
read.py:26:-    for i,x in enumerate(data[:-1]):
read.py:26:-        line+="{:05.2f},".format(x) 
read.py:26:-    line+="{:05.2f}".format(data[-1])
read.py:26:-    print(line)
read.py:26:+        data = [ax,ay,az,gx,gy,gz,x,y,z]
read.py:27: 
read.py:28:-    time.sleep(0.25)
read.py:28:+        line = ""
read.py:29:+        for i,x in enumerate(data[:-1]):
read.py:30:+            line+="{:05.2f},".format(x) 
read.py:31:+        line+="{:05.2f}".format(data[-1])
read.py:32:+        print(line)
read.py:33:+
read.py:34:+        time.sleep(0.25)
server.py:1: #!/usr/bin/python2
server.py:2: from tcpcom2 import TCPServer
server.py:3:+from read import *
server.py:4: import time
server.py:5: 
server.py:6: IP_PORT = 22000
server.py:14:     elif state == "MESSAGE":
server.py:15:         print("Server:-- Message received:",msg)
server.py:16:         if msg == "go":
server.py:17:-            server.sendMessage("Hello")
server.py:17:+            server.sendMessage(read_all(imu))
server.py:18:         if msg == "end":
server.py:19:             server.terminate()
server.py:20: 
